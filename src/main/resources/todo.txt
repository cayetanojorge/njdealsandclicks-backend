TODO

- fare struttura per blog: tabelle e come relazionare blog a prodotti menzionati nell'articolo

- DOMANI (quando avrai utenti registrati o funzionalitÃ  sensibili):
  âœ… Implementa JWT Authentication
    - Backend: Spring Boot (spring-security + jjwt / jose4j / nimbus-jose-jwt)
    - Configura rotte sicure per /api/user/** e simili
    - Usa filter per validare il token in ogni richiesta
    - Crea endpoint: /auth/register, /auth/login (restituisce JWT), /auth/refresh (se serve)
  
  âœ… Frontend:
    - Salva il token JWT in localStorage (o in cookie httpOnly se serve maggiore sicurezza)
    - Aggiungi il token nellâ€™Authorization header (Bearer <token>) in ogni richiesta autenticata
    - Gestisci scadenza token e logout automatico


- Inserire rate limiting su Fly.io (evitare mutli richieste da stesso ip e scraping, evita aumento costo fly io):
  âœ… Configura nginx come reverse proxy con limit_req per IP
    - Modifica/aggiungi: Dockerfile, nginx.conf, fly.toml
    - Servizio: `njdealsandclicks-proxy`
    - Definisci burst e limite/s (es. 10 richieste/s con burst 20 per IP)


- QUANDO IL BACKEND SARÃ€ PRONTO AL DEPLOY STABILE:
  âœ… Opzione A - Google Cloud Run (consigliata se vuoi scalabilitÃ  automatica, niente manutenzione):
    - Scrivi Dockerfile ottimizzato per Spring Boot (con JAR fat o native image GraalVM se vuoi avvio istantaneo)
    - Registra account Google Cloud e crea un progetto
    - Abilita Cloud Run API
    - Installa e configura `gcloud CLI`
    - Builda e pusha immagine backend su Google Container Registry (GCR) o Artifact Registry
    - Esegui `gcloud run deploy` scegliendo regione `europe-west3` (Francoforte)
    - Configura:
        - accesso pubblico (no autenticazione richiesta)
        - 512MB RAM, 1 vCPU
        - max instances: 1â€“2 (per evitare esplosione costi)
    - (Opzionale) Aggiungi cron job su Vercel o servizio esterno per pingare e prevenire cold start
  âœ… Opzione B - Oracle Cloud Free Tier (consigliata se vuoi controllo totale a costo zero):
    - Registra account Oracle Cloud con dati reali e verifica identitÃ 
    - Crea una Compute Instance ARM gratuita (`VM.Standard.A1.Flex`)
    - Configura: 1 OCPU + 2 o 4 GB RAM
    - Abilita porte pubbliche (es. 8080) in regole di sicurezza
    - Connettiti via SSH
    - Installa Docker e Java nella VM
    - Esegui Spring Boot come container o JAR standalone
    - Aggiungi systemd service o script avvio automatico
    - (Opzionale) Proteggi VM con fail2ban o firewall base (UFW)
  â—ï¸In entrambi i casi:
    - Assicurati che il backend NON dipenda da filesystem locale o DB locale (usa solo Supabase o esterni)
    - Verifica che tutte le rotte rispondano correttamente da Vercel â†’ backend
    - Aggiorna frontend per usare il nuovo dominio backend (Cloud Run URL o IP Oracle)

- ðŸ”„ TODO FUTURO: Sostituire @ManyToMany con entitÃ  ponte (es. NewsletterProduct, ArticleProduct)
  Attualmente stai usando @ManyToMany per mappare newsletter â†’ prodotti e articoli â†’ prodotti.
  Quando il progetto evolverÃ , valuta di passare a entitÃ  intermedie dedicate per ottenere:
  maggiore flessibilitÃ  (es. aggiungere campi come subscribed_at, priority, note, mercato ecc.)
  controllo totale su creazione/modifica/eliminazione
  performance migliorata con indici mirati
  ðŸ“Œ PrioritÃ : media
  ðŸ“… Tempistica: quando inizierai ad avere iscrizioni utenti reali o blog attivi in piÃ¹ mercati

- âœ… Inizializzare gestione schema DB con Flyway (migrazioni versionate)
  Attualmente stai usando spring.jpa.hibernate.ddl-auto=update, ma per un'app solida e scalabile Ã¨ meglio mantenere lo schema con migrazioni esplicite.
  âœ… Passi:
  Aggiungi dipendenza Flyway (flyway-core) nel backend
  Disattiva ddl-auto (validate o none) in application.yml
  Crea cartella src/main/resources/db/migration
  Crea file V1__init_schema.sql con lo stato attuale delle tabelle
  Usa Flyway per ogni modifica futura (es. V2__add_slug_to_article.sql)
  ðŸ“Œ Benefici:
  Gestione tracciabile e sicura dello schema DB
  Allineamento automatico tra ambienti dev/test/prod
  Compatibile con Supabase (PostgreSQL)
  ðŸ“… Tempistica: Subito, prima che il progetto cresca troppo e sia difficile esportare lo schema corrente
  --> USO:
  cosÃ¬ posso creare in tabella intermedia newsletter_product e newsletter_category il ON DELETE CASCADE a id newsletter e id product.
  cosÃ¬ in caso eliminato:
    . record newsletter, allora eliminato tutte record in entrambi tab newsletter_... che gli fanno riferimento
    . record product, eliminato riferimento a tale prodotto in tabella newsletter_product
    . record category, eliminato riferimento a tale prodotto in tabella newsletter_category